# Makefile.in for Turquoise SuperStat
#
# $Id$

# Variables
CXXFLAGS=@CXXFLAGS@ -I. -Wall
LDFLAGS=@LDFLAGS@
srcdir=@srcdir@
VPATH=@scrdir@
LIBS=@LIBS@
DESTDIR=
OBJS=turqstat.o statengine.o statview.o squishread.o fdapxread.o jamread.o mypointread.o utility.o sdmread.o tanstaaflread.o newsspoolread.o
prefix=/usr
exec_prefix=${prefix}

# Magic targets
all: turqstat@EXE@

clean:
	-rm $(OBJS)
	-rm turqstat

distclean: clean
	-rm config.status config.log config.h Makefile

install: turqstat@EXE@
	install -d $(DESTDIR)@bindir@ $(DESTDIR)@datadir@/doc/turqstat/ $(DESTDIR)@mandir@/man1
	install -s turqstat@EXE@ $(DESTDIR)@bindir@
	install -m 644 turqstat.doc $(DESTDIR)@datadir@/doc/turqstat/
	install -m 644 turqstat.dok $(DESTDIR)@datadir@/doc/turqstat/
	install -m 644 turqstat.1   $(DESTDIR)@mandir@/man1/

# Binary
turqstat: $(OBJS)
	@CXX@ $(CXXFLAGS) $(LDFLAGS) -o turqstat $(OBJS) $(LIBS)

# OS/2 binary
turqstat.exe: $(OBJS) turqstat.def
	@CXX@ $(CXXFLAGS) $(LDFLAGS) -o turqstat.exe $(OBJS) turqstat.def $(LIBS)

# Object files
turqstat.o: turqstat.cpp statengine.h statview.h arearead.h squishread.h fdapxread.h jamread.h mypointread.h version.h tanstaaflread.h config.h
	@CXX@ $(CXXFLAGS) -c $(srcdir)/turqstat.cpp

statengine.o: statengine.cpp statengine.h config.h
	@CXX@ $(CXXFLAGS) -c $(srcdir)/statengine.cpp

statview.o: statview.cpp statview.h statengine.h version.h config.h
	@CXX@ $(CXXFLAGS) -c $(srcdir)/statview.cpp

squishread.o: squishread.cpp squishread.h arearead.h statengine.h datatypes.h utility.h config.h
	@CXX@ $(CXXFLAGS) -c $(srcdir)/squishread.cpp

utility.o: utility.cpp utility.h config.h
	@CXX@ $(CXXFLAGS) -c $(srcdir)/utility.cpp

fdapxread.o: fdapxread.cpp fdapxread.h datatypes.h statengine.h arearead.h config.h
	@CXX@ $(CXXFLAGS) -c $(srcdir)/fdapxread.cpp

tanstaaflread.o: tanstaaflread.cpp tanstaaflread.h datatypes.h statengine.h arearead.h config.h
	@CXX@ $(CXXFLAGS) -c $(srcdir)/tanstaaflread.cpp

jamread.o: jamread.cpp jamread.h datatypes.h statengine.h arearead.h config.h
	@CXX@ $(CXXFLAGS) -c $(srcdir)/jamread.cpp

mypointread.o: mypointread.cpp mypointread.h datatypes.h statengine.h arearead.h config.h
	@CXX@ $(CXXFLAGS) -c $(srcdir)/mypointread.cpp

sdmread.o: sdmread.cpp sdmread.h arearead.h statengine.h datatypes.h utility.h config.h
	@CXX@ $(CXXFLAGS) -c $(srcdir)/sdmread.cpp

newsspoolread.o: newsspoolread.cpp newsspoolread.h arearead.h utility.h config.h
	@CXX@ $(CXXFLAGS) -c $(srcdir)/newsspoolread.cpp


# Used to make a distribution from my local CVS tree files
# do not use for distributed archives
VER ?= x.x
dist:
	-mkdir -p turqstat-$(VER)/debian
	autoconf
	autoheader
	cp -p *.1 *.def *.cpp *.h Makefile.in config.h.in configure configure.in ChangeLog COPYING turqstat-$(VER)/
	iso2dos -i turqstat.doc turqstat-$(VER)/turqstat.doc
	iso2dos -i turqstat.dok turqstat-$(VER)/turqstat.dok
	-cp -p debian/* turqstat-$(VER)/debian
	tar cvfz turqstat-$(VER).tar.gz turqstat-$(VER)/*
	rm -rf turqstat-$(VER)/
